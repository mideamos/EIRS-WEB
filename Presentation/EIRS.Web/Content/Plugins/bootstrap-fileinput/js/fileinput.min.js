/*!
 * @copyright Copyright &copy; Kartik Visweswaran, Krajee.com, 2014 - 2015
 * @version 4.2.9
 *
 * File input styled for Bootstrap 3.0 that utilizes HTML5 File Input's advanced 
 * features including the FileReader API. 
 * 
 * The plugin drastically enhances the HTML file input to preview multiple files on the client before
 * upload. In addition it provides the ability to preview content of images, text, videos, audio, html, 
 * flash and other objects. It also offers the ability to upload and delete files using AJAX, and add 
 * files in batches (i.e. preview, append, or remove before upload).
 * 
 * Author: Kartik Visweswaran
 * Copyright: 2015, Kartik Visweswaran, Krajee.com
 * For more JQuery plugins visit http://plugins.krajee.com
 * For more Yii related demos visit http://demos.krajee.com
 */
(function(n){"use strict";typeof define=="function"&&define.amd?define(["jquery"],n):typeof module=="object"&&module.exports?module.exports=n(require("jquery")):n(window.jQuery)})(function(n){"use strict";n.fn.fileinputLocales={};var c,tt,r,i,it,w,rt,ut,u,e,d,o,ft,et,ot,st,ht,ct,lt,at,vt,yt,pt,wt,bt,kt,dt,gt,ni,ti,ii,ri,ui,fi,ei,oi,si,hi,g,nt,b,k,l,t,h,f,s,a,ci,v,y,p;c=function(n){if(navigator.appName!=="Microsoft Internet Explorer")return!1;if(n===10)return new RegExp("msie\\s"+n,"i").test(navigator.userAgent);var t=document.createElement("div"),i;return t.innerHTML="<!--[if IE "+n+"]> <i><\/i> <![endif]-->",i=t.getElementsByTagName("i").length,document.body.appendChild(t),t.parentNode.removeChild(t),i};tt=function(){return new RegExp("Edge/[0-9]+","i").test(navigator.userAgent)};r=function(n,t,i,r){var u=r?t:t+".fileinput";n.off(u).on(u,i)};i={data:{},init:function(n){var t=n.initialPreview,r=n.id;t.length>0&&!h(t)&&(t=t.split(n.initialPreviewDelimiter));i.data[r]={content:t,config:n.initialPreviewConfig,tags:n.initialPreviewThumbTags,delimiter:n.initialPreviewDelimiter,template:n.previewGenericTemplate,msg:function(t){return n.getMsgSelected(t)},initId:n.previewInitId,footer:n.getLayoutTemplate("footer").replace(/\{progress}/g,n.renderThumbProgress()),isDelete:n.initialPreviewShowDelete,caption:n.initialCaption,actions:function(t,i,r,u,f){return n.renderFileActions(t,i,r,u,f)}}},fetch:function(n){return i.data[n].content.filter(function(n){return n!==null})},count:function(n,t){return!!i.data[n]&&!!i.data[n].content?t?i.data[n].content.length:i.fetch(n).length:0},get:function(r,u,f){var c="init_"+u,e=i.data[r],o=e.config[u],a=e.initId+"-"+c,s,h,l=" file-preview-initial";return(f=f===undefined?!0:f,e.content[u]===null)?"":(t(o)||t(o.frameClass)||(l+=" "+o.frameClass),s=e.template.replace(/\{previewId}/g,a).replace(/\{frameClass}/g,l).replace(/\{fileindex}/g,c).replace(/\{content}/g,e.content[u]).replace(/\{footer}/g,i.footer(r,u,f)),e.tags.length&&e.tags[u]&&(s=v(s,e.tags[u])),t(o)||t(o.frameAttr)||(h=n(document.createElement("div")).html(s),h.find(".file-preview-initial").attr(o.frameAttr),s=h.html(),h.remove()),s)},add:function(t,r,u,f,e){var o=n.extend(!0,{},i.data[t]),s;return h(r)||(r=r.split(o.delimiter)),e?(s=o.content.push(r)-1,o.config[s]=u,o.tags[s]=f):(s=r.length,o.content=r,o.config=u,o.tags=f),i.data[t]=o,s},set:function(t,r,u,f,e){var s=n.extend(!0,{},i.data[t]),o,c;if(r&&r.length&&(h(r)||(r=r.split(s.delimiter)),c=r.filter(function(n){return n!==null}),c.length)){if(s.content===undefined&&(s.content=[]),s.config===undefined&&(s.config=[]),s.tags===undefined&&(s.tags=[]),e){for(o=0;o<r.length;o++)r[o]&&s.content.push(r[o]);for(o=0;o<u.length;o++)u[o]&&s.config.push(u[o]);for(o=0;o<f.length;o++)f[o]&&s.tags.push(f[o])}else s.content=r,s.config=u,s.tags=f;i.data[t]=s}},unset:function(n,t){var r=i.count(n);if(r){if(r===1){i.data[n].content=[];i.data[n].config=[];return}i.data[n].content[t]=null;i.data[n].config[t]=null}},out:function(n){var r="",e=i.data[n],u,f=i.count(n,!0),t;if(f===0)return{content:"",caption:""};for(t=0;t<f;t++)r+=i.get(n,t);return u=e.msg(i.count(n)),{content:r,caption:u}},footer:function(n,r,u){var o=i.data[n];if(u=u===undefined?!0:u,o.config.length===0||t(o.config[r]))return"";var e=o.config[r],h=f("caption",e)?e.caption:"",c=f("width",e)?e.width:"auto",s=f("url",e)?e.url:!1,l=f("key",e)?e.key:null,a=s===!1&&u,v=o.isDelete?o.actions(!1,!0,a,s,l):"",y=o.footer.replace(/\{actions}/g,v);return y.replace(/\{caption}/g,h).replace(/\{width}/g,c).replace(/\{indicator}/g,"").replace(/\{indicatorTitle}/g,"")}};it=function(n,t){return(t=t||0,typeof n=="number")?n:(typeof n=="string"&&(n=parseFloat(n)),isNaN(n)?t:n)};w=function(){return window.File&&window.FileReader};rt=function(){var n=document.createElement("div");return!c(9)&&!tt()&&(n.draggable!==undefined||n.ondragstart!==undefined&&n.ondrop!==undefined)};ut=function(){return w()&&window.FormData};u=function(n,t){n.removeClass(t).addClass(t)};e='style="width:{width};height:{height};"';d='      <param name="controller" value="true" />\n      <param name="allowFullScreen" value="true" />\n      <param name="allowScriptAccess" value="always" />\n      <param name="autoPlay" value="false" />\n      <param name="autoStart" value="false" />\n      <param name="quality" value="high" />\n';o='<div class="file-preview-other">\n   <span class="{previewFileIconClass}">{previewFileIcon}<\/span>\n<\/div>';ft={removeIcon:'<i class="glyphicon glyphicon-trash text-danger"><\/i>',removeClass:"btn btn-xs btn-default",removeTitle:"Remove file",uploadIcon:'<i class="glyphicon glyphicon-upload text-info"><\/i>',uploadClass:"btn btn-xs btn-default",uploadTitle:"Upload file",indicatorNew:'<i class="glyphicon glyphicon-hand-down text-warning"><\/i>',indicatorSuccess:'<i class="glyphicon glyphicon-ok-sign text-success"><\/i>',indicatorError:'<i class="glyphicon glyphicon-exclamation-sign text-danger"><\/i>',indicatorLoading:'<i class="glyphicon glyphicon-hand-up text-muted"><\/i>',indicatorNewTitle:"Not uploaded yet",indicatorSuccessTitle:"Uploaded",indicatorErrorTitle:"Upload Error",indicatorLoadingTitle:"Uploading ..."};et='{preview}\n<div class="kv-upload-progress hide"><\/div>\n<div class="input-group {class}">\n   {caption}\n   <div class="input-group-btn">\n       {remove}\n       {cancel}\n       {upload}\n       {browse}\n   <\/div>\n<\/div>';ot='{preview}\n<div class="kv-upload-progress hide"><\/div>\n{remove}\n{cancel}\n{upload}\n{browse}\n';st='<div class="file-preview {class}">\n    {close}    <div class="{dropClass}">\n    <div class="file-preview-thumbnails">\n    <\/div>\n    <div class="clearfix"><\/div>    <div class="file-preview-status text-center text-success"><\/div>\n    <div class="kv-fileinput-error"><\/div>\n    <\/div>\n<\/div>';ct='<div class="close fileinput-remove">&times;<\/div>\n';ht='<span class="glyphicon glyphicon-file kv-caption-icon"><\/span>';lt='<div tabindex="500" class="form-control file-caption {class}">\n   <div class="file-caption-name"><\/div>\n<\/div>\n';at='<button type="{type}" tabindex="500" title="{title}" class="{css}" {status}>{icon}{label}<\/button>';vt='<a href="{href}" tabindex="500" title="{title}" class="{css}" {status}>{icon}{label}<\/a>';yt='<div tabindex="500" class="{css}" {status}>{icon}{label}<\/div>';pt='<div id="{id}" class="file-preview-detail-modal modal fade" tabindex="-1">\n  <div class="modal-dialog modal-lg">\n    <div class="modal-content">\n      <div class="modal-header">\n        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;<\/button>\n        <h3 class="modal-title">{heading} <small>{title}<\/small><\/h3>\n      <\/div>\n      <div class="modal-body">\n           <pre>{body}<\/pre>\n      <\/div>\n    <\/div>\n  <\/div>\n<\/div>';wt='<div class="progress">\n    <div class="{class}" role="progressbar" aria-valuenow="{percent}" aria-valuemin="0" aria-valuemax="100" style="width:{percent}%;">\n        {percent}%\n     <\/div>\n<\/div>';bt='<div class="file-thumbnail-footer">\n    <div class="file-footer-caption" title="{caption}">{caption}<\/div>\n    {progress} {actions}\n<\/div>';kt='<div class="file-actions">\n    <div class="file-footer-buttons">\n        {upload}{delete}{other}    <\/div>\n    <div class="file-upload-indicator" title="{indicatorTitle}">{indicator}<\/div>\n    <div class="clearfix"><\/div>\n<\/div>';dt='<button type="button" class="kv-file-remove {removeClass}" title="{removeTitle}" {dataUrl}{dataKey}>{removeIcon}<\/button>\n';gt='<button type="button" class="kv-file-upload {uploadClass}" title="{uploadTitle}">   {uploadIcon}\n<\/button>\n';ni='<button type="button" class="btn btn-default btn-xs btn-block" title="{zoomTitle}: {caption}" onclick="{dialog}">\n   {zoomInd}\n<\/button>\n';ti='<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}">\n   {content}\n   {footer}\n<\/div>\n';ii='<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}">\n    <object class="file-object" data="{data}" type="{type}" width="{width}" height="{height}">\n       '+o+"\n    <\/object>\n   {footer}\n<\/div>";ri='<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}">\n   <img src="{data}" class="file-preview-image" title="{caption}" alt="{caption}" '+e+">\n   {footer}\n<\/div>\n";ui='<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}">\n   <pre class="file-preview-text" title="{caption}" '+e+">{data}<\/pre>\n   {zoom}\n   {footer}\n<\/div>";fi='<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}" title="{caption}" '+e+'>\n   <video width="{width}" height="{height}" controls>\n       <source src="{data}" type="{type}">\n       '+o+"\n   <\/video>\n   {footer}\n<\/div>\n";ei='<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}" title="{caption}" '+e+'>\n   <audio controls>\n       <source src="{data}" type="{type}">\n       '+o+"\n   <\/audio>\n   {footer}\n<\/div>";oi='<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}" title="{caption}" '+e+'>\n   <object class="file-object" type="application/x-shockwave-flash" width="{width}" height="{height}" data="{data}">\n'+d+"       "+o+"\n   <\/object>\n   {footer}\n<\/div>\n";si='<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}" title="{caption}" '+e+'>\n   <object class="file-object" data="{data}" type="{type}" width="{width}" height="{height}">\n       <param name="movie" value="{caption}" />\n'+d+"         "+o+"\n   <\/object>\n   {footer}\n<\/div>";hi='<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}" title="{caption}" '+e+'>\n   <div class="file-preview-other-frame">\n   '+o+'\n   <\/div>\n   <div class="file-preview-other-footer">{footer}<\/div>\n<\/div>';g={main1:et,main2:ot,preview:st,close:ct,zoom:ni,icon:ht,caption:lt,modal:pt,progress:wt,footer:bt,actions:kt,actionDelete:dt,actionUpload:gt,btnDefault:at,btnLink:vt,btnBrowse:yt};nt={generic:ti,html:ii,image:ri,text:ui,video:fi,audio:ei,flash:oi,object:si,other:hi};b=["image","html","text","video","audio","flash","object"];k={image:{width:"auto",height:"160px"},html:{width:"213px",height:"160px"},text:{width:"160px",height:"136px"},video:{width:"213px",height:"160px"},audio:{width:"213px",height:"80px"},flash:{width:"213px",height:"160px"},object:{width:"160px",height:"160px"},other:{width:"160px",height:"160px"}};l={image:function(n,t){return n!==undefined?n.match("image.*"):t.match(/\.(gif|png|jpe?g)$/i)},html:function(n,t){return n!==undefined?n==="text/html":t.match(/\.(htm|html)$/i)},text:function(n,t){return n!==undefined&&n.match("text.*")||t.match(/\.(txt|md|csv|nfo|ini|json|php|js|css)$/i)},video:function(n,t){return n!==undefined&&n.match(/\.video\/(ogg|mp4|webm|3gp)$/i)||t.match(/\.(og?|mp4|webm|3gp)$/i)},audio:function(n,t){return n!==undefined&&n.match(/\.audio\/(ogg|mp3|wav)$/i)||t.match(/\.(ogg|mp3|wav)$/i)},flash:function(n,t){return n!==undefined&&n==="application/x-shockwave-flash"||t.match(/\.(swf)$/i)},object:function(){return!0},other:function(){return!0}};t=function(t,i){return t===undefined||t===null||t.length===0||i&&n.trim(t)===""};h=function(n){return Array.isArray(n)||Object.prototype.toString.call(n)==="[object Array]"};f=function(n,t){return typeof t=="object"&&n in t};s=function(i,r,u){return t(i)||t(i[r])?u:n(i[r])};a=function(){return Math.round((new Date).getTime()+Math.random()*100)};ci=function(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")};v=function(t,i){var r=t;return i?(n.each(i,function(n,t){typeof t=="function"&&(t=t());r=r.split(n).join(t)}),r):r};y=window.URL||window.webkitURL;p=function(t,i){var r=this;(r.$element=n(t),r.validate())&&(r.isPreviewable=w(),r.isIE9=c(9),r.isIE10=c(10),r.isPreviewable||r.isIE9?(r.init(i),r.listen()):r.$element.removeClass("file-loading"))};p.prototype={constructor:p,validate:function(){var n=this,t;return n.$element.attr("type")==="file"?!0:(t='<div class="help-block alert alert-warning"><h4>Invalid Input Type<\/h4>You must set an input <code>type = file<\/code> for <b>bootstrap-fileinput<\/b> plugin to initialize.<\/div>',n.$element.after(t),!1)},init:function(r){var f=this,o=f.$element,e;n.each(r,function(n,t){switch(n){case"minFileCount":case"maxFileCount":case"maxFileSize":f[n]=it(t);break;default:f[n]=t}});f.fileInputCleared=!1;f.fileBatchCompleted=!0;f.isPreviewable||(f.showPreview=!1);f.uploadFileAttr=t(o.attr("name"))?"file_data":o.attr("name");f.reader=null;f.formdata={};f.clearStack();f.uploadCount=0;f.uploadStatus={};f.uploadLog=[];f.uploadAsyncCount=0;f.loadedImages=[];f.totalImagesCount=0;f.ajaxRequests=[];f.isError=!1;f.ajaxAborted=!1;f.cancelling=!1;e=f.getLayoutTemplate("progress");f.progressTemplate=e.replace("{class}",f.progressClass);f.progressCompleteTemplate=e.replace("{class}",f.progressCompleteClass);f.dropZoneEnabled=rt()&&f.dropZoneEnabled;f.isDisabled=f.$element.attr("disabled")||f.$element.attr("readonly");f.isUploadable=ut()&&!t(f.uploadUrl);f.slug=typeof r.slugCallback=="function"?r.slugCallback:f.slugDefault;f.mainTemplate=f.showCaption?f.getLayoutTemplate("main1"):f.getLayoutTemplate("main2");f.captionTemplate=f.getLayoutTemplate("caption");f.previewGenericTemplate=f.getPreviewTemplate("generic");f.resizeImage&&(f.maxImageWidth||f.maxImageHeight)&&(f.imageCanvas=document.createElement("canvas"),f.imageCanvasContext=f.imageCanvas.getContext("2d"));t(f.$element.attr("id"))&&f.$element.attr("id",a());f.$container===undefined?f.$container=f.createContainer():f.refreshContainer();f.$progress=f.$container.find(".kv-upload-progress");f.$btnUpload=f.$container.find(".fileinput-upload");f.$captionContainer=s(r,"elCaptionContainer",f.$container.find(".file-caption"));f.$caption=s(r,"elCaptionText",f.$container.find(".file-caption-name"));f.$previewContainer=s(r,"elPreviewContainer",f.$container.find(".file-preview"));f.$preview=s(r,"elPreviewImage",f.$container.find(".file-preview-thumbnails"));f.$previewStatus=s(r,"elPreviewStatus",f.$container.find(".file-preview-status"));f.$errorContainer=s(r,"elErrorContainer",f.$previewContainer.find(".kv-fileinput-error"));t(f.msgErrorClass)||u(f.$errorContainer,f.msgErrorClass);f.$errorContainer.hide();f.fileActionSettings=n.extend(ft,r.fileActionSettings);f.previewInitId="preview-"+a();f.id=f.$element.attr("id");i.init(f);f.initPreview(!0);f.initPreviewDeletes();f.options=r;f.setFileDropZoneTitle();f.$element.removeClass("file-loading");f.$element.attr("disabled")&&f.disable()},parseError:function(t,i,r){var e=this,f=n.trim(i+""),o=f.slice(-1)==="."?"":".",u=t.responseJSON!==undefined&&t.responseJSON.error!==undefined?t.responseJSON.error:t.responseText;return e.cancelling&&e.msgUploadAborted&&(f=e.msgUploadAborted),e.showAjaxErrorDetails&&u?(u=n.trim(u.replace(/\n\s*\n/g,"\n")),u=u.length>0?"<pre>"+u+"<\/pre>":"",f+=o+u):f+=o,e.cancelling=!1,r?"<b>"+r+": <\/b>"+f:f},raise:function(t,i){var u=this,r=n.Event(t);if(i!==undefined?u.$element.trigger(r,i):u.$element.trigger(r),r.isDefaultPrevented())return!1;if(!r.result)return r.result;switch(t){case"filebatchuploadcomplete":case"filebatchuploadsuccess":case"fileuploaded":case"fileclear":case"filecleared":case"filereset":case"fileerror":case"filefoldererror":case"fileuploaderror":case"filebatchuploaderror":case"filedeleteerror":case"filecustomerror":case"filesuccessremove":break;default:u.ajaxAborted=r.result}return!0},getLayoutTemplate:function(n){var i=this,r=f(n,i.layoutTemplates)?i.layoutTemplates[n]:g[n];return t(i.customLayoutTags)?r:v(r,i.customLayoutTags)},getPreviewTemplate:function(n){var i=this,r=f(n,i.previewTemplates)?i.previewTemplates[n]:nt[n];return t(i.customPreviewTags)?r:v(r,i.customPreviewTags)},parseFilePreviewIcon:function(t,i){var r=this,u,f=r.previewFileIcon;return(i&&i.indexOf(".")>-1&&(u=i.split(".").pop(),r.previewFileIconSettings&&r.previewFileIconSettings[u]&&(f=r.previewFileIconSettings[u]),r.previewFileExtSettings&&n.each(r.previewFileExtSettings,function(n,t){r.previewFileIconSettings[n]&&t(u)&&(f=r.previewFileIconSettings[n])})),t.indexOf("{previewFileIcon}")>-1)?t.replace(/\{previewFileIconClass}/g,r.previewFileIconClass).replace(/\{previewFileIcon}/g,f):t},getOutData:function(n,t,i){var r=this;return n=n||{},t=t||{},i=i||r.filestack.slice(0)||{},{form:r.formdata,files:i,filenames:r.filenames,extra:r.getExtraData(),response:t,reader:r.reader,jqXHR:n}},listen:function(){var i=this,u=i.$element,o=i.$captionContainer,s=i.$btnFile,f=u.closest("form"),e=i.$container;r(u,"change",n.proxy(i.change,i));r(s,"click",function(){i.raise("filebrowse");i.isError&&!i.isUploadable&&i.clear();o.focus()});r(f,"reset",n.proxy(i.reset,i));r(e.find(".fileinput-remove:not([disabled])"),"click",n.proxy(i.clear,i));r(e.find(".fileinput-cancel"),"click",n.proxy(i.cancel,i));i.isUploadable&&i.dropZoneEnabled&&i.showPreview&&i.initDragDrop();i.isUploadable||r(f,"submit",n.proxy(i.submitForm,i));r(i.$container.find(".fileinput-upload"),"click",function(r){var u=n(this),f,e=!u.hasClass("disabled")&&t(u.attr("disabled"));if(!i.isUploadable){e&&u.attr("type")!=="submit"&&(f=u.closest("form"),f.length&&f.trigger("submit"),r.preventDefault());return}r.preventDefault();e&&i.upload()})},submitForm:function(){var n=this,i=n.$element,t=i.get(0).files;return t&&n.minFileCount>0&&n.getFileCount(t.length)<n.minFileCount?(n.noFilesError({}),!1):!n.abort({})},abort:function(t){var i=this,r;return i.ajaxAborted&&typeof i.ajaxAborted=="object"&&i.ajaxAborted.message!==undefined?(r=n.extend(i.getOutData(),t),r.abortData=i.ajaxAborted.data||{},r.abortMessage=i.ajaxAborted.message,i.cancel(),i.setProgress(100),i.showUploadError(i.ajaxAborted.message,r,"filecustomerror"),!0):!1},noFilesError:function(n){var t=this,i=t.minFileCount>1?t.filePlural:t.fileSingle,r=t.msgFilesTooLess.replace("{n}",t.minFileCount).replace("{files}",i),f=t.$errorContainer;t.addError(r);t.isError=!0;t.updateFileDetails(0);f.fadeIn(800);t.raise("fileerror",[n]);t.clearFileInput();u(t.$container,"has-error")},setProgress:function(n,i){var r=this,u=Math.min(n,100),f=u<100?r.progressTemplate:r.progressCompleteTemplate;i=i||r.$progress;t(f)||i.html(f.replace(/\{percent}/g,u))},lock:function(){var n=this;n.resetErrors();n.disable();n.showRemove&&u(n.$container.find(".fileinput-remove"),"hide");n.showCancel&&n.$container.find(".fileinput-cancel").removeClass("hide");n.raise("filelock",[n.filestack,n.getExtraData()])},unlock:function(n){var t=this;n===undefined&&(n=!0);t.enable();t.showCancel&&u(t.$container.find(".fileinput-cancel"),"hide");t.showRemove&&t.$container.find(".fileinput-remove").removeClass("hide");n&&t.resetFileStack();t.raise("fileunlock",[t.filestack,t.getExtraData()])},resetFileStack:function(){var t=this,i=0,r=[],u=[];t.getThumbs().each(function(){var f=n(this),o=f.attr("data-fileindex"),e=t.filestack[o];o!==-1&&(e!==undefined?(r[i]=e,u[i]=t.getFileName(e),f.attr({id:t.previewInitId+"-"+i,"data-fileindex":i}),i++):f.attr({id:"uploaded-"+a(),"data-fileindex":"-1"}))});t.filestack=r;t.filenames=u},destroy:function(){var t=this,n=t.$container;n.find(".file-drop-zone").off();t.$element.insertBefore(n).off(".fileinput").removeData();n.off().remove()},refresh:function(t){var i=this,r=i.$element;t=t?n.extend(i.options,t):i.options;i.destroy();r.fileinput(t);r.val()&&r.trigger("change.fileinput")},initDragDrop:function(){var i=this,f=i.$container.find(".file-drop-zone");r(f,"dragenter.fileinput dragover.fileinput",function(t){var r=n.inArray("Files",t.originalEvent.dataTransfer.types)>-1;if(t.stopPropagation(),t.preventDefault(),i.isDisabled||!r){t.originalEvent.dataTransfer.effectAllowed="none";t.originalEvent.dataTransfer.dropEffect="none";return}u(n(this),"file-highlighted")},!0);r(f,"dragleave",function(t){(t.stopPropagation(),t.preventDefault(),i.isDisabled)||n(this).removeClass("file-highlighted")});r(f,"drop",function(r){(r.preventDefault(),i.isDisabled||t(r.originalEvent.dataTransfer.files))||(i.change(r,"dragdrop"),n(this).removeClass("file-highlighted"))});r(n(document),"dragenter.fileinput dragover.fileinput drop.fileinput",function(n){n.stopPropagation();n.preventDefault()},!0)},setFileDropZoneTitle:function(){var n=this,i=n.$container.find(".file-drop-zone");(i.find("."+n.dropZoneTitleClass).remove(),n.isUploadable&&n.showPreview&&i.length!==0&&!(n.getFileStack().length>0)&&n.dropZoneEnabled)&&(i.find(".file-preview-frame").length===0&&t(n.defaultPreviewContent)&&i.prepend('<div class="'+n.dropZoneTitleClass+'">'+n.dropZoneTitle+"<\/div>"),n.$container.removeClass("file-input-new"),u(n.$container,"file-input-ajax-new"))},errorsExist:function(){var i=this,t;return i.$errorContainer.find("li").length?!0:(t=n(document.createElement("div")).html(i.$errorContainer.html()),t.find("span.kv-error-close").remove(),t.find("ul").remove(),n.trim(t.text()).length?!0:!1)},getMsgSelected:function(n){var t=this,i=n===1?t.fileSingle:t.filePlural;return t.msgSelected.replace("{n}",n).replace("{files}",i)},renderThumbProgress:function(){return'<div class="file-thumb-progress hide">'+this.progressTemplate.replace(/\{percent}/g,"0")+"<\/div>"},renderFileFooter:function(n,t){var i=this,u=i.fileActionSettings,f,r,e=i.getLayoutTemplate("footer");return i.isUploadable?(f=e.replace(/\{actions}/g,i.renderFileActions(!0,!0,!1,!1,!1)),r=f.replace(/\{caption}/g,n).replace(/\{width}/g,t).replace(/\{progress}/g,i.renderThumbProgress()).replace(/\{indicator}/g,u.indicatorNew).replace(/\{indicatorTitle}/g,u.indicatorNewTitle)):r=e.replace(/\{actions}/g,"").replace(/\{caption}/g,n).replace(/\{progress}/g,"").replace(/\{width}/g,t).replace(/\{indicator}/g,"").replace(/\{indicatorTitle}/g,""),v(r,i.previewThumbTags)},renderFileActions:function(n,t,i,r,u){if(!n&&!t)return"";var e=this,c=r===!1?"":' data-url="'+r+'"',s=u===!1?"":' data-key="'+u+'"',o=e.getLayoutTemplate("actionDelete"),h="",l=e.getLayoutTemplate("actions"),a=e.otherActionButtons.replace(/\{dataKey}/g,s),f=e.fileActionSettings,v=i?f.removeClass+" disabled":f.removeClass;return o=o.replace(/\{removeClass}/g,v).replace(/\{removeIcon}/g,f.removeIcon).replace(/\{removeTitle}/g,f.removeTitle).replace(/\{dataUrl}/g,c).replace(/\{dataKey}/g,s),n&&(h=e.getLayoutTemplate("actionUpload").replace(/\{uploadClass}/g,f.uploadClass).replace(/\{uploadIcon}/g,f.uploadIcon).replace(/\{uploadTitle}/g,f.uploadTitle)),l.replace(/\{delete}/g,o).replace(/\{upload}/g,h).replace(/\{other}/g,a)},setThumbStatus:function(n,t){var i=this;if(i.showPreview){var r="indicator"+t,e=r+"Title",o="file-preview-"+t.toLowerCase(),u=n.find(".file-upload-indicator"),f=i.fileActionSettings;n.removeClass("file-preview-success file-preview-error file-preview-loading");t==="Error"&&n.find(".kv-file-upload").attr("disabled",!0);u.html(f[r]);u.attr("title",f[e]);n.addClass(o)}},clearPreview:function(){var n=this,t=n.showUploadedThumbs?n.$preview.find(".file-preview-frame:not(.file-preview-success)"):n.$preview.find(".file-preview-frame");t.remove();n.$preview.find(".file-preview-frame").length&&n.showPreview||n.resetUpload();n.validateDefaultPreview()},initPreview:function(n){var r=this,f=r.initialCaption||"",u;if(!i.count(r.id)){r.clearPreview();n?r.setCaption(f):r.initCaption();return}u=i.out(r.id);f=n&&r.initialCaption?r.initialCaption:u.caption;r.$preview.html(u.content);r.setCaption(f);t(u.content)||r.$container.removeClass("file-input-new")},initPreviewDeletes:function(){var f=this,o=f.deleteExtraData||{},e=function(){var n=f.isUploadable?i.count(f.id):f.$element.get(0).files.length;f.$preview.find(".kv-file-remove").length!==0||n||(f.reset(),f.initialCaption="")};f.$preview.find(".kv-file-remove").each(function(){var c=n(this),w=c.data("url")||f.deleteUrl,a=c.data("key");if(!t(w)&&a!==undefined){var s=c.closest(".file-preview-frame"),p=i.data[f.id],b,l,v=s.data("fileindex"),y,h;v=parseInt(v.replace("init_",""));y=t(p.config)&&t(p.config[v])?null:p.config[v];h=t(y)||t(y.extra)?o:y.extra;typeof h=="function"&&(h=h());l={id:c.attr("id"),key:a,extra:h};b=n.extend({url:w,type:"POST",dataType:"json",data:n.extend({key:a},h),beforeSend:function(n){f.ajaxAborted=!1;f.raise("filepredelete",[a,n,h]);f.ajaxAborted?n.abort():(u(s,"file-uploading"),u(c,"disabled"))},success:function(n,r,u){var o,y;if(t(n)||t(n.error))i.unset(f.id,v),o=i.count(f.id),y=o>0?f.getMsgSelected(o):"",f.raise("filedeleted",[a,u,h]),f.setCaption(y);else{l.jqXHR=u;l.response=n;f.showError(n.error,l,"filedeleteerror");s.removeClass("file-uploading");c.removeClass("disabled");e();return}s.removeClass("file-uploading").addClass("file-deleted");s.fadeOut("slow",function(){f.clearObjects(s);s.remove();e();o||f.getFileStack().length!==0||(f.setCaption(""),f.reset())})},error:function(n,t,i){var r=f.parseError(n,i);l.jqXHR=n;l.response={};f.showError(r,l,"filedeleteerror");s.removeClass("file-uploading");e()}},f.ajaxDeleteSettings);r(c,"click",function(){if(!f.validateMinCount())return!1;n.ajax(b)})}})},clearObjects:function(t){t.find("video audio").each(function(){this.pause();n(this).remove()});t.find("img object div").each(function(){n(this).remove()})},clearFileInput:function(){var u=this,i=u.$element,e,r,f;t(i.val())||(u.isIE9||u.isIE10?(e=i.closest("form"),r=n(document.createElement("form")),f=n(document.createElement("div")),i.before(f),e.length?e.after(r):f.after(r),r.append(i).trigger("reset"),f.before(i).remove(),r.remove()):i.val(""),u.fileInputCleared=!0)},resetUpload:function(){var n=this;n.uploadCache={content:[],config:[],tags:[],append:!0};n.uploadCount=0;n.uploadStatus={};n.uploadLog=[];n.uploadAsyncCount=0;n.loadedImages=[];n.totalImagesCount=0;n.$btnUpload.removeAttr("disabled");n.setProgress(0);u(n.$progress,"hide");n.resetErrors(!1);n.ajaxAborted=!1;n.ajaxRequests=[];n.resetCanvas()},resetCanvas:function(){var n=this;n.canvas&&n.imageCanvasContext&&n.imageCanvasContext.clearRect(0,0,n.canvas.width,n.canvas.height)},cancel:function(){var t=this,r=t.ajaxRequests,u=r.length,i;if(u>0)for(i=0;i<u;i+=1)t.cancelling=!0,r[i].abort();t.getThumbs().each(function(){var i=n(this),r=i.attr("data-fileindex");i.removeClass("file-uploading");t.filestack[r]!==undefined&&(i.find(".kv-file-upload").removeClass("disabled").removeAttr("disabled"),i.find(".kv-file-remove").removeClass("disabled").removeAttr("disabled"));t.unlock()})},cleanMemory:function(n){var t=n.is("img")?n.attr("src"):n.find("source").attr("src");y.revokeObjectURL(t)},hasInitialPreview:function(){var n=this;return!n.overwriteInitial&&i.count(n.id)},clear:function(){var t=this,r;t.$btnUpload.removeAttr("disabled");t.getThumbs().find("video,audio,img").each(function(){t.cleanMemory(n(this))});t.resetUpload();t.clearStack();t.clearFileInput();t.resetErrors(!0);t.raise("fileclear");t.hasInitialPreview()?(t.showFileIcon(),t.resetPreview(),t.initPreviewDeletes(),t.$container.removeClass("file-input-new")):(t.getThumbs().each(function(){t.clearObjects(n(this))}),t.isUploadable&&(i.data[t.id]={}),t.$preview.html(""),r=!t.overwriteInitial&&t.initialCaption.length>0?t.initialCaption:"",t.setCaption(r),t.$caption.attr("title",""),u(t.$container,"file-input-new"),t.validateDefaultPreview());t.$container.find(".file-preview-frame").length===0&&(t.initCaption()||t.$captionContainer.find(".kv-caption-icon").hide());t.hideFileIcon();t.raise("filecleared");t.$captionContainer.focus();t.setFileDropZoneTitle()},resetPreview:function(){var n=this,t,r;i.count(n.id)?(t=i.out(n.id),n.$preview.html(t.content),r=n.initialCaption?n.initialCaption:t.caption,n.setCaption(r)):(n.clearPreview(),n.initCaption())},clearDefaultPreview:function(){var n=this;n.$preview.find(".file-default-preview").remove()},validateDefaultPreview:function(){var n=this;n.showPreview&&!t(n.defaultPreviewContent)&&(n.$preview.html('<div class="file-default-preview">'+n.defaultPreviewContent+"<\/div>"),n.$container.removeClass("file-input-new"))},resetPreviewThumbs:function(n){var t=this,r;if(n){t.clearPreview();t.clearStack();return}t.hasInitialPreview()?(r=i.out(t.id),t.$preview.html(r.content),t.setCaption(r.caption),t.initPreviewDeletes()):t.clearPreview()},reset:function(){var n=this;n.resetPreview();n.$container.find(".fileinput-filename").text("");n.raise("filereset");u(n.$container,"file-input-new");(n.$preview.find(".file-preview-frame").length||n.isUploadable&&n.dropZoneEnabled)&&n.$container.removeClass("file-input-new");n.setFileDropZoneTitle();n.clearStack();n.formdata={}},disable:function(){var n=this;n.isDisabled=!0;n.raise("filedisabled");n.$element.attr("disabled","disabled");n.$container.find(".kv-fileinput-caption").addClass("file-caption-disabled");n.$container.find(".btn-file, .fileinput-remove, .fileinput-upload, .file-preview-frame button").attr("disabled",!0);n.initDragDrop()},enable:function(){var n=this;n.isDisabled=!1;n.raise("fileenabled");n.$element.removeAttr("disabled");n.$container.find(".kv-fileinput-caption").removeClass("file-caption-disabled");n.$container.find(".btn-file, .fileinput-remove, .fileinput-upload, .file-preview-frame button").removeAttr("disabled");n.initDragDrop()},getThumbs:function(n){return n=n||"",this.$preview.find(".file-preview-frame:not(.file-preview-initial)"+n)},getExtraData:function(n,t){var i=this,r=i.uploadExtraData;return typeof i.uploadExtraData=="function"&&(r=i.uploadExtraData(n,t)),r},uploadExtra:function(t,i){var r=this,u=r.getExtraData(t,i);u.length!==0&&n.each(u,function(n,t){r.formdata.append(n,t)})},setAsyncUploadStatus:function(t,i,r){var u=this,f=0;u.setProgress(i,n("#"+t).find(".file-thumb-progress"));u.uploadStatus[t]=i;n.each(u.uploadStatus,function(n,t){f+=t});u.setProgress(Math.ceil(f/r))},initXhr:function(n,t,i){var r=this;return n.upload&&n.upload.addEventListener("progress",function(n){var u=0,f=n.loaded||n.position,e=n.total;n.lengthComputable&&(u=Math.ceil(f/e*100));t?r.setAsyncUploadStatus(t,u,i):r.setProgress(Math.ceil(u))},!1),n},ajaxSubmit:function(t,i,r,u,f,e){var o=this,s;o.raise("filepreajax",[f,e]);o.uploadExtra(f,e);s=n.extend({xhr:function(){var t=n.ajaxSettings.xhr();return o.initXhr(t,f,o.getFileStack().length)},url:o.uploadUrl,type:"POST",dataType:"json",data:o.formdata,cache:!1,processData:!1,contentType:!1,beforeSend:t,success:i,complete:r,error:u},o.ajaxSettings);o.ajaxRequests.push(n.ajax(s))},initUploadSuccess:function(t,r,u){var f=this,e,a,v,l,o,s,h,c;f.showPreview&&typeof t=="object"&&!n.isEmptyObject(t)&&t.initialPreview!==undefined&&t.initialPreview.length>0&&(f.hasInitData=!0,o=t.initialPreview||[],s=t.initialPreviewConfig||[],h=t.initialPreviewThumbTags||[],e=t.append===undefined||t.append?!0:!1,f.overwriteInitial=!1,r!==undefined?u?(c=r.attr("data-fileindex"),f.uploadCache.content[c]=o[0],f.uploadCache.config[c]=s[0],f.uploadCache.tags[c]=h[0],f.uploadCache.append=e):(v=i.add(f.id,o,s[0],h[0],e),a=i.get(f.id,v,!1),l=n(a).hide(),r.after(l).fadeOut("slow",function(){l.fadeIn("slow").css("display:inline-block");f.initPreviewDeletes();f.clearFileInput();r.remove()})):(i.set(f.id,o,s,h,e),f.initPreview(),f.initPreviewDeletes()))},initSuccessThumbs:function(){var t=this;t.showPreview&&t.getThumbs(".file-preview-success").each(function(){var i=n(this),u=i.find(".kv-file-remove");u.removeAttr("disabled");r(u,"click",function(){var n=t.raise("filesuccessremove",[i.attr("id"),i.data("fileindex")]);(t.cleanMemory(i),n!==!1)&&i.fadeOut("slow",function(){i.remove();t.$preview.find(".file-preview-frame").length||t.reset()})})})},checkAsyncComplete:function(){for(var t=this,r,i=0;i<t.filestack.length;i++)if(t.filestack[i]&&(r=t.previewInitId+"-"+i,n.inArray(r,t.uploadLog)===-1))return!1;return t.uploadAsyncCount===t.uploadLog.length},uploadSingle:function(r,f,e){var o=this,nt=o.getFileStack().length,y=new FormData,l,h=o.previewInitId+"-"+r,s,w,a,p,tt=o.filestack.length>0||!n.isEmptyObject(o.uploadExtraData),b,k,d,g,v,c={id:h,index:r};(o.formdata=y,o.showPreview&&(s=n("#"+h+":not(.file-preview-initial)"),a=s.find(".kv-file-upload"),p=s.find(".kv-file-remove"),n("#"+h).find(".file-thumb-progress").removeClass("hide")),nt===0||!tt||a&&a.hasClass("disabled")||o.abort(c))||(v=function(n,t){o.updateStack(n,undefined);o.uploadLog.push(t);o.checkAsyncComplete()&&(o.fileBatchCompleted=!0)},w=function(){o.fileBatchCompleted&&setTimeout(function(){o.showPreview&&(i.set(o.id,o.uploadCache.content,o.uploadCache.config,o.uploadCache.tags,o.uploadCache.append),o.hasInitData&&(o.initPreview(),o.initPreviewDeletes()));o.unlock();o.clearFileInput();o.raise("filebatchuploadcomplete",[o.filestack,o.getExtraData()]);o.uploadCount=0;o.uploadStatus={};o.uploadLog=[];o.setProgress(100)},100)},b=function(t){l=o.getOutData(t);o.fileBatchCompleted=!1;o.showPreview&&(s.hasClass("file-preview-success")||(o.setThumbStatus(s,"Loading"),u(s,"file-uploading")),a.attr("disabled",!0),p.attr("disabled",!0));e||o.lock();o.raise("filepreupload",[l,h,r]);c=n.extend(c,l);o.abort(c)&&(t.abort(),o.setProgress(100))},k=function(i,u,f){l=o.getOutData(f,i);c=n.extend(c,l);setTimeout(function(){t(i)||t(i.error)?(o.showPreview&&(o.setThumbStatus(s,"Success"),a.hide(),o.initUploadSuccess(i,s,e)),o.raise("fileuploaded",[l,h,r]),e?v(r,h):o.updateStack(r,undefined)):(o.setThumbStatus(s,"Error"),o.showUploadError(i.error,c),e&&v(r,h))},100)},d=function(){setTimeout(function(){o.showPreview&&(a.removeAttr("disabled"),p.removeAttr("disabled"),s.removeClass("file-uploading"));e?w():(o.unlock(!1),o.clearFileInput());o.initSuccessThumbs()},100)},g=function(t,i,u){var l=o.parseError(t,u,e?f[r].name:null);setTimeout(function(){e&&v(r,h);o.uploadStatus[h]=100;o.setThumbStatus(s,"Error");c=n.extend(c,o.getOutData(t));o.showUploadError(l,c)},100)},y.append(o.uploadFileAttr,f[r],o.filenames[r]),y.append("file_id",r),o.ajaxSubmit(b,k,d,g,h,r))},uploadBatch:function(){var i=this,r=i.filestack,f=r.length,l=i.filestack.length>0||!n.isEmptyObject(i.uploadExtraData),e,o,s,h,c;(i.formdata=new FormData,f!==0&&l&&!i.abort({}))&&(e=function(){n.each(r,function(n){i.updateStack(n,undefined)});i.clearFileInput()},o=function(t){i.lock();var r=i.getOutData(t);i.showPreview&&i.getThumbs().each(function(){var t=n(this),r=t.find(".kv-file-upload"),f=t.find(".kv-file-remove");t.hasClass("file-preview-success")||(i.setThumbStatus(t,"Loading"),u(t,"file-uploading"));r.attr("disabled",!0);f.attr("disabled",!0)});i.raise("filebatchpreupload",[r]);i.abort(r)&&(t.abort(),i.setProgress(100))},s=function(r,u,f){var s=i.getOutData(f,r),h=i.getThumbs(),o=0,c=t(r)||t(r.errorkeys)?[]:r.errorkeys;t(r)||t(r.error)?(i.raise("filebatchuploadsuccess",[s]),e(),i.showPreview?(h.each(function(){var t=n(this),r=t.find(".kv-file-upload");t.find(".kv-file-upload").hide();i.setThumbStatus(t,"Success");t.removeClass("file-uploading");r.removeAttr("disabled")}),i.initUploadSuccess(r)):i.reset()):(i.showPreview&&(h.each(function(){var t=n(this),r=t.find(".kv-file-remove"),u=t.find(".kv-file-upload");if(t.removeClass("file-uploading"),u.removeAttr("disabled"),r.removeAttr("disabled"),c.length===0){i.setThumbStatus(t,"Error");return}n.inArray(o,c)!==-1?i.setThumbStatus(t,"Error"):(t.find(".kv-file-upload").hide(),i.setThumbStatus(t,"Success"),i.updateStack(o,undefined));o++}),i.initUploadSuccess(r)),i.showUploadError(r.error,s,"filebatchuploaderror"))},h=function(){i.setProgress(100);i.unlock();i.initSuccessThumbs();i.clearFileInput();i.raise("filebatchuploadcomplete",[i.filestack,i.getExtraData()])},c=function(t,r,u){var e=i.getOutData(t),o=i.parseError(t,u);(i.showUploadError(o,e,"filebatchuploaderror"),i.uploadFileCount=f-1,i.showPreview)&&(i.getThumbs().each(function(){var t=n(this),r=t.attr("data-fileindex");t.removeClass("file-uploading");i.filestack[r]!==undefined&&i.setThumbStatus(t,"Error")}),i.getThumbs().removeClass("file-uploading"),i.getThumbs(" .kv-file-upload").removeAttr("disabled"),i.getThumbs(" .kv-file-delete").removeAttr("disabled"))},n.each(r,function(n,u){t(r[n])||i.formdata.append(i.uploadFileAttr,u,i.filenames[n])}),i.ajaxSubmit(o,s,h,c))},uploadExtraOnly:function(){var n=this,i={},r,u,f,e;(n.formdata=new FormData,n.abort(i))||(r=function(t){n.lock();var r=n.getOutData(t);n.raise("filebatchpreupload",[r]);n.setProgress(50);i.data=r;i.xhr=t;n.abort(i)&&(t.abort(),n.setProgress(100))},u=function(i,r,u){var f=n.getOutData(u,i);t(i)||t(i.error)?(n.raise("filebatchuploadsuccess",[f]),n.clearFileInput(),n.initUploadSuccess(i)):n.showUploadError(i.error,f,"filebatchuploaderror")},f=function(){n.setProgress(100);n.unlock();n.clearFileInput();n.raise("filebatchuploadcomplete",[n.filestack,n.getExtraData()])},e=function(t,r,u){var f=n.getOutData(t),e=n.parseError(t,u);i.data=f;n.showUploadError(e,f,"filebatchuploaderror")},n.ajaxSubmit(r,u,f,e))},upload:function(){var t=this,r=t.getFileStack().length,i,f,u,e=!n.isEmptyObject(t.getExtraData());if(t.minFileCount>0&&t.getFileCount(r)<t.minFileCount){t.noFilesError({});return}if(t.isUploadable&&!t.isDisabled&&(r!==0||e)){if(t.resetUpload(),t.$progress.removeClass("hide"),t.uploadCount=0,t.uploadStatus={},t.uploadLog=[],t.lock(),t.setProgress(2),r===0&&e){t.uploadExtraOnly();return}if(u=t.filestack.length,t.hasInitData=!1,t.uploadAsync){for(f=t.getOutData(),t.raise("filebatchpreupload",[f]),t.fileBatchCompleted=!1,t.uploadCache={content:[],config:[],tags:[],append:!0},t.uploadAsyncCount=t.getFileStack().length,i=0;i<u;i++)t.uploadCache.content[i]=null,t.uploadCache.config[i]=null,t.uploadCache.tags[i]=null;for(i=0;i<u;i++)t.filestack[i]!==undefined&&t.uploadSingle(i,t.filestack,!0);return}t.uploadBatch()}},initFileActions:function(){var t=this;t.showPreview&&(t.$preview.find(".kv-file-remove").each(function(){var s=n(this),u=s.closest(".file-preview-frame"),h,f=u.attr("id"),e=u.attr("data-fileindex"),o,c,l;r(s,"click",function(){if(l=t.raise("filepreremove",[f,e]),l===!1||!t.validateMinCount())return!1;h=u.hasClass("file-preview-error");t.cleanMemory(u);u.fadeOut("slow",function(){t.updateStack(e,undefined);t.clearObjects(u);u.remove();f&&h&&t.$errorContainer.find('li[data-file-id="'+f+'"]').fadeOut("fast",function(){n(this).remove();t.errorsExist()||t.resetErrors()});var r=t.getFileStack(!0),s=r.length,l=i.count(t.id),a=t.showPreview&&t.$preview.find(".file-preview-frame").length;t.clearFileInput();s!==0||l!==0||a?(o=l+s,c=o>1?t.getMsgSelected(o):r[0]?t.getFileNames()[0]:"",t.setCaption(c)):t.reset();t.raise("fileremoved",[f,e])})})}),t.$preview.find(".kv-file-upload").each(function(){var i=n(this);r(i,"click",function(){var n=i.closest(".file-preview-frame"),r=n.attr("data-fileindex");n.hasClass("file-preview-error")||t.uploadSingle(r,t.filestack,!1)})}))},hideFileIcon:function(){this.overwriteInitial&&this.$captionContainer.find(".kv-caption-icon").hide()},showFileIcon:function(){this.$captionContainer.find(".kv-caption-icon").show()},addError:function(n){var i=this,t=i.$errorContainer;if(n&&t.length){t.html(i.errorCloseButton+n);t.find(".kv-error-close").off("click").on("click",function(){t.fadeOut("slow")})}},resetErrors:function(n){var t=this,i=t.$errorContainer;t.isError=!1;t.$container.removeClass("has-error");i.html("");n?i.fadeOut("slow"):i.hide()},showFolderError:function(n){var t=this,i=t.$errorContainer;n&&(t.addError(t.msgFoldersNotAllowed.replace(/\{n}/g,n)),i.fadeIn(800),u(t.$container,"has-error"),t.raise("filefoldererror",[n]))},showUploadError:function(n,t,i){var r=this,f=r.$errorContainer,o=i||"fileuploaderror",e=t&&t.id?'<li data-file-id="'+t.id+'">'+n+"<\/li>":"<li>"+n+"<\/li>";return f.find("ul").length===0?r.addError("<ul>"+e+"<\/ul>"):f.find("ul").append(e),f.fadeIn(800),r.raise(o,[t]),r.$container.removeClass("file-input-new"),u(r.$container,"has-error"),!0},showError:function(n,t,i){var r=this,f=r.$errorContainer,e=i||"fileerror";return t=t||{},t.reader=r.reader,r.addError(n),f.fadeIn(800),r.raise(e,[t]),r.isUploadable||r.clearFileInput(),r.$container.removeClass("file-input-new"),u(r.$container,"has-error"),r.$btnUpload.attr("disabled",!0),!0},errorHandler:function(n,t){var i=this,r=n.target.error;r.code===r.NOT_FOUND_ERR?i.showError(i.msgFileNotFound.replace("{name}",t)):r.code===r.SECURITY_ERR?i.showError(i.msgFileSecured.replace("{name}",t)):r.code===r.NOT_READABLE_ERR?i.showError(i.msgFileNotReadable.replace("{name}",t)):r.code===r.ABORT_ERR?i.showError(i.msgFilePreviewAborted.replace("{name}",t)):i.showError(i.msgFilePreviewError.replace("{name}",t))},parseFileType:function(n){for(var e=this,o,u,i,r=0;r<b.length;r+=1)if(i=b[r],o=f(i,e.fileTypeSettings)?e.fileTypeSettings[i]:l[i],u=o(n.type,n.name)?i:"",!t(u))return u;return"other"},previewDefault:function(t,i,r){if(this.showPreview){var u=this,o=t?t.name:"",s=y.createObjectURL(t),h=i.slice(i.lastIndexOf("-")+1),f=u.previewSettings.other||k.other,e=u.renderFileFooter(t.name,f.width),c=u.parseFilePreviewIcon(u.getPreviewTemplate("other"),o);r===!0&&(u.isUploadable||(e+='<div class="file-other-error" title="'+u.fileActionSettings.indicatorErrorTitle+'">'+u.fileActionSettings.indicatorError+"<\/div>"));u.clearDefaultPreview();u.$preview.append("\n"+c.replace(/\{previewId}/g,i).replace(/\{frameClass}/g,"").replace(/\{fileindex}/g,h).replace(/\{caption}/g,u.slug(t.name)).replace(/\{width}/g,f.width).replace(/\{height}/g,f.height).replace(/\{type}/g,t.type).replace(/\{data}/g,s).replace(/\{footer}/g,e));r===!0&&u.isUploadable&&u.setThumbStatus(n("#"+i),"Error")}},previewFile:function(n,t,i,r,u){if(this.showPreview){var e=this,o=e.parseFileType(t),p=t?t.name:"",s=e.slug(p),h,v,w=e.allowedPreviewTypes,b=e.allowedPreviewMimeTypes,l=e.getPreviewTemplate(o),tt=w&&w.indexOf(o)>=0,y,c=f(o,e.previewSettings)?e.previewSettings[o]:k[o],it=b&&b.indexOf(t.type)!==-1,d=e.renderFileFooter(s,c.width),g="",nt=r.slice(r.lastIndexOf("-")+1);tt||it?(l=e.parseFilePreviewIcon(l,p.split(".").pop()),o==="text"?(v=ci(i.target.result),y="text-"+a(),h=l.replace(/\{zoom}/g,e.getLayoutTemplate("zoom")),g=e.getLayoutTemplate("modal").replace("{id}",y).replace(/\{title}/g,s).replace(/\{body}/g,v).replace(/\{heading}/g,e.msgZoomModalHeading),h=h.replace(/\{previewId}/g,r).replace(/\{caption}/g,s).replace(/\{width}/g,c.width).replace(/\{height}/g,c.height).replace(/\{frameClass}/g,"").replace(/\{zoomInd}/g,e.zoomIndicator).replace(/\{footer}/g,d).replace(/\{fileindex}/g,nt).replace(/\{type}/g,t.type).replace(/\{zoomTitle}/g,e.msgZoomTitle).replace(/\{dialog}/g,"$('#"+y+"').modal('show')").replace(/\{data}/g,v)+g):h=l.replace(/\{previewId}/g,r).replace(/\{caption}/g,s).replace(/\{frameClass}/g,"").replace(/\{type}/g,t.type).replace(/\{fileindex}/g,nt).replace(/\{width}/g,c.width).replace(/\{height}/g,c.height).replace(/\{footer}/g,d).replace(/\{data}/g,u),e.clearDefaultPreview(),e.$preview.append("\n"+h),e.validateImage(n,r,s,t.type)):e.previewDefault(t,r)}},slugDefault:function(n){return t(n)?"":n.split(/(\\|\/)/g).pop().replace(/[^\w\u00C0-\u017F\-.\\\/ ]+/g,"")},readFiles:function(i){this.reader=new FileReader;var r=this,w=r.$element,b=r.$preview,u=r.reader,v=r.$previewContainer,s=r.$previewStatus,k=r.msgLoading,p=r.msgProgress,d=r.previewInitId,e=i.length,c=r.fileTypeSettings,g=r.filestack.length,o,a=function(t,u,f,e){var s=n.extend(r.getOutData({},{},i),{id:f,index:e}),h={id:f,index:e,file:u,files:i};return r.previewDefault(u,f,!0),r.isUploadable&&r.pushStack(undefined),setTimeout(o(e+1),100),r.initFileActions(),r.isUploadable?r.showUploadError(t,s):r.showError(t,h)};r.loadedImages=[];r.totalImagesCount=0;n.each(i,function(n,t){var i="image",u=f(i,r.fileTypeSettings)?r.fileTypeSettings[i]:l[i];u&&u(t.type)&&r.totalImagesCount++});o=function(n){if(t(w.attr("multiple"))&&(e=1),n>=e){r.isUploadable&&r.filestack.length>0?r.raise("filebatchselected",[r.getFileStack()]):r.raise("filebatchselected",[i]);v.removeClass("file-thumb-loading");s.html("");return}var yt=g+n,rt=d+"-"+yt,at,nt=i[n],it=r.slug(nt.name),st=(nt.size||0)/1e3,ct,lt="",pt=y.createObjectURL(nt),ot=0,ht,tt,vt,ut,ft=r.allowedFileTypes,wt=t(ft)?"":ft.join(", "),et=r.allowedFileExtensions,bt=t(et)?"":et.join(", ");if(t(et)||(lt=new RegExp("\\.("+et.join("|")+")$","i")),st=st.toFixed(2),r.maxFileSize>0&&st>r.maxFileSize){tt=r.msgSizeTooLarge.replace("{name}",it).replace("{size}",st).replace("{maxSize}",r.maxFileSize);r.isError=a(tt,nt,rt,n);return}if(!t(ft)&&h(ft)){for(ht=0;ht<ft.length;ht+=1)vt=ft[ht],ct=c[vt],ut=ct!==undefined&&ct(nt.type,it),ot+=t(ut)?0:ut.length;if(ot===0){tt=r.msgInvalidFileType.replace("{name}",it).replace("{types}",wt);r.isError=a(tt,nt,rt,n);return}}if(ot===0&&!t(et)&&h(et)&&!t(lt)&&(ut=it.match(lt),ot+=t(ut)?0:ut.length,ot===0)){tt=r.msgInvalidFileExtension.replace("{name}",it).replace("{extensions}",bt);r.isError=a(tt,nt,rt,n);return}if(!r.showPreview){r.pushStack(nt);setTimeout(o(n+1),100);r.raise("fileloaded",[nt,rt,n,u]);return}b.length>0&&FileReader!==undefined?(s.html(k.replace("{index}",n+1).replace("{files}",e)),v.addClass("file-thumb-loading"),u.onerror=function(n){r.errorHandler(n,it)},u.onload=function(t){r.previewFile(n,nt,t,rt,pt);r.initFileActions()},u.onloadend=function(){tt=p.replace("{index}",n+1).replace("{files}",e).replace("{percent}",50).replace("{name}",it);setTimeout(function(){s.html(tt);r.updateFileDetails(e);o(n+1)},100);r.raise("fileloaded",[nt,rt,n,u])},u.onprogress=function(t){if(t.lengthComputable){var i=t.loaded/t.total*100,r=Math.ceil(i);tt=p.replace("{index}",n+1).replace("{files}",e).replace("{percent}",r).replace("{name}",it);setTimeout(function(){s.html(tt)},100)}},at=f("text",c)?c.text:l.text,at(nt.type,it)?u.readAsText(nt,r.textEncoding):u.readAsArrayBuffer(nt)):(r.previewDefault(nt,rt),setTimeout(function(){o(n+1);r.updateFileDetails(e)},100),r.raise("fileloaded",[nt,rt,n,u]));r.pushStack(nt)};o(0);r.updateFileDetails(e,!1)},updateFileDetails:function(n){var t=this,e=t.$element,r=t.getFileStack(),o=e.val()||r.length&&r[0].name||"",u=t.slug(o),f=t.isUploadable?r.length:n,s=i.count(t.id)+f,h=f>1?t.getMsgSelected(s):u;t.isError?(t.$previewContainer.removeClass("file-thumb-loading"),t.$previewStatus.html(""),t.$captionContainer.find(".kv-caption-icon").hide()):t.showFileIcon();t.setCaption(h,t.isError);t.$container.removeClass("file-input-new file-input-ajax-new");arguments.length===1&&t.raise("fileselect",[n,u]);i.count(t.id)&&t.initPreviewDeletes()},validateMinCount:function(){var n=this,t=n.isUploadable?n.getFileStack().length:n.$element.get(0).files.length;return n.validateInitialCount&&n.minFileCount>0&&n.getFileCount(t-1)<n.minFileCount?(n.noFilesError({}),!1):!0},getFileCount:function(n){var t=this,r=0;return t.validateInitialCount&&!t.overwriteInitial&&(r=i.count(t.id),n+=r),n},change:function(r){var u=this,l=u.$element;if(!u.isUploadable&&t(l.val())&&u.fileInputCleared){u.fileInputCleared=!1;return}u.fileInputCleared=!1;var f,y,e,p=arguments.length>1,s=p?r.originalEvent.dataTransfer.files:l.get(0).files,d=t(l.attr("multiple")),a=0,h,w,v=0,b=u.filestack.length,c=u.isUploadable,o,k=d&&b>0,g=function(t,i,r,f){var e=n.extend(u.getOutData({},{},s),{id:r,index:f}),o={id:r,index:f,file:i,files:s};return u.isUploadable?u.showUploadError(t,e):u.showError(t,o)};if(u.reader=null,u.resetUpload(),u.hideFileIcon(),u.isUploadable&&u.$container.find(".file-drop-zone ."+u.dropZoneTitleClass).remove(),p)for(f=[];s[a];)h=s[a],h.type||h.size%4096!=0?f.push(h):v++,a++;else f=r.target.files===undefined?r.target&&r.target.value?[{name:r.target.value.replace(/^.+\\/,"")}]:[]:r.target.files;if(t(f)||f.length===0){c||u.clear();u.showFolderError(v);u.raise("fileselectnone");return}if(u.resetErrors(),o=f.length,e=u.isUploadable?u.getFileStack().length+o:o,e=u.getFileCount(e),u.maxFileCount>0&&e>u.maxFileCount){if(!u.autoReplace||o>u.maxFileCount){w=u.autoReplace&&o>u.maxFileCount?o:e;y=u.msgFilesTooMany.replace("{m}",u.maxFileCount).replace("{n}",w);u.isError=g(y,null,null,null);u.$captionContainer.find(".kv-caption-icon").hide();u.setCaption("",!0);u.$container.removeClass("file-input-new file-input-ajax-new");return}e>u.maxFileCount&&u.resetPreviewThumbs(c)}else!c||k?(u.resetPreviewThumbs(!1),k&&u.clearStack()):c&&b===0&&(!i.count(u.id)||u.overwriteInitial)&&u.resetPreviewThumbs(!0);u.isPreviewable?u.readFiles(f):u.updateFileDetails(1);u.showFolderError(v)},getFileName:function(n){return n&&n.name?this.slug(n.name):undefined},getFileNames:function(n){var t=this;return t.filenames.filter(function(t){return n?t!==undefined:t!==undefined&&t!==null})},getFileStack:function(n){var t=this;return t.filestack.filter(function(t){return n?t!==undefined:t!==undefined&&t!==null})},clearStack:function(){var n=this;n.filestack=[];n.filenames=[]},updateStack:function(n,t){var i=this;i.filestack[n]=t;i.filenames[n]=i.getFileName(t)},pushStack:function(n){var t=this;t.filestack.push(n);t.filenames.push(t.getFileName(n))},checkDimensions:function(n,i,r,u,f,e,o){var s=this,a,l,y=i==="Small"?"min":"max",c=s[y+"Image"+e],h,v;!t(c)&&r.length&&((h=r[0],l=e==="Width"?h.naturalWidth||h.width:h.naturalHeight||h.height,v=i==="Small"?l>=c:l<=c,v)||(a=s["msgImage"+e+i].replace("{name}",f).replace("{size}",c),s.showUploadError(a,o),s.setThumbStatus(u,"Error"),s.updateStack(n,null)))},validateImage:function(n,t,i,u){var f=this,h=f.$preview,s,c,l,o=h.find("#"+t),e=o.find("img");(i=i||"Untitled",e.length)&&r(e,"load",function(){c=o.width();l=h.width();c>l&&(e.css("width","100%"),o.css("width","97%"));s={ind:n,id:t};f.checkDimensions(n,"Small",e,o,i,"Width",s);f.checkDimensions(n,"Small",e,o,i,"Height",s);f.resizeImage||(f.checkDimensions(n,"Large",e,o,i,"Width",s),f.checkDimensions(n,"Large",e,o,i,"Height",s));f.raise("fileimageloaded",[t]);f.loadedImages.push({ind:n,img:e,thumb:o,pid:t,typ:u});f.validateAllImages();y.revokeObjectURL(e.attr("src"))})},validateAllImages:function(){var n=this,i,t,f,e,u,r,o={},s;if(n.loadedImages.length===n.totalImagesCount&&(n.raise("fileimagesloaded"),n.resizeImage)){for(s=n.isUploadable?n.showUploadError:n.showError,i=0;i<n.loadedImages.length;i++)t=n.loadedImages[i],f=t.img,e=t.thumb,u=t.pid,r=t.ind,o={id:u,index:r},n.getResizedImage(f[0],t.typ,u,r)||(s(n.msgImageResizeError,o,"fileimageresizeerror"),n.setThumbStatus(e,"Error"),n.updateStack(r,undefined));n.raise("fileimagesresized")}},getResizedImage:function(n,t,i,r){var u=this,f=n.naturalWidth,e=n.naturalHeight,h=1,o=u.maxImageWidth||f,s=u.maxImageHeight||e,v=f&&e,c,l,a=u.imageCanvas,y=u.imageCanvasContext;if(!v)return!1;if(f===o&&e===s)return!0;t=t||u.resizeDefaultImageType;c=f>o;l=e>s;h=u.resizePreference==="width"?c?o/f:l?s/e:1:l?s/e:c?o/f:1;u.resetCanvas();f*=h;e*=h;a.width=f;a.height=e;try{return y.drawImage(n,0,0,f,e),a.toBlob(function(n){u.raise("fileimageresized",[i,r]);u.filestack[r]=n},t,u.resizeQuality),!0}catch(p){return!1}},initCaption:function(){var n=this,i=n.initialCaption||"";return n.overwriteInitial||t(i)?(n.$caption.html(""),!1):(n.setCaption(i),!0)},setCaption:function(i,r){var u=this,f,e;if(r)f=n("<div>"+u.msgValidationError+"<\/div>").text(),e='<span class="'+u.msgValidationErrorClass+'">'+u.msgValidationErrorIcon+f+"<\/span>";else{if(t(i)||u.$caption.length===0)return;f=n("<div>"+i+"<\/div>").text();e=u.getLayoutTemplate("icon")+f}u.$caption.html(e);u.$caption.attr("title",f);u.$captionContainer.find(".file-caption-ellipsis").attr("title",f)},initBrowse:function(n){var t=this;t.$btnFile=n.find(".btn-file");t.$btnFile.append(t.$element)},createContainer:function(){var t=this,i=n(document.createElement("div")).attr({"class":"file-input file-input-new"}).html(t.renderMain());return t.$element.before(i),t.initBrowse(i),i},refreshContainer:function(){var n=this,t=n.$container;t.before(n.$element);t.html(n.renderMain());n.initBrowse(t)},renderMain:function(){var n=this,t=n.isUploadable&&n.dropZoneEnabled?" file-drop-zone":"file-drop-disabled",i=n.showClose?n.getLayoutTemplate("close"):"",r=n.showPreview?n.getLayoutTemplate("preview").replace(/\{class}/g,n.previewClass).replace(/\{dropClass}/g,t):"",u=n.isDisabled?n.captionClass+" file-caption-disabled":n.captionClass,f=n.captionTemplate.replace(/\{class}/g,u+" kv-fileinput-caption");return n.mainTemplate.replace(/\{class}/g,n.mainClass).replace(/\{preview}/g,r).replace(/\{close}/g,i).replace(/\{caption}/g,f).replace(/\{upload}/g,n.renderButton("upload")).replace(/\{remove}/g,n.renderButton("remove")).replace(/\{cancel}/g,n.renderButton("cancel")).replace(/\{browse}/g,n.renderButton("browse"))},renderButton:function(n){var i=this,u=i.getLayoutTemplate("btnDefault"),f=i[n+"Class"],o=i[n+"Title"],s=i[n+"Icon"],r=i[n+"Label"],h=i.isDisabled?" disabled":"",e="button";switch(n){case"remove":if(!i.showRemove)return"";break;case"cancel":if(!i.showCancel)return"";f+=" hide";break;case"upload":if(!i.showUpload)return"";i.isUploadable&&!i.isDisabled?u=i.getLayoutTemplate("btnLink").replace("{href}",i.uploadUrl):e="submit";break;case"browse":u=i.getLayoutTemplate("btnBrowse");break;default:return""}return f+=n==="browse"?" btn-file":" fileinput-"+n+" fileinput-"+n+"-button",t(r)||(r=' <span class="'+i.buttonLabelClass+'">'+r+"<\/span>"),u.replace("{type}",e).replace("{css}",f).replace("{title}",o).replace("{status}",h).replace("{icon}",s).replace("{label}",r)}};n.fn.fileinput=function(i){if(w()||c(9)){var u=Array.apply(null,arguments),r=[];u.shift();this.each(function(){var e=n(this),f=e.data("fileinput"),s=typeof i=="object"&&i,o=s.language||e.data("language")||"en",h=n.fn.fileinput.defaults;f||(o==="en"||t(n.fn.fileinputLocales[o])||n.extend(h,n.fn.fileinputLocales[o]),f=new p(this,n.extend(h,s,e.data())),e.data("fileinput",f));typeof i=="string"&&r.push(f[i].apply(f,u))});switch(r.length){case 0:return this;case 1:return r[0];default:return r}}};n.fn.fileinput.defaults={language:"en",showCaption:!0,showPreview:!0,showRemove:!0,showUpload:!0,showCancel:!0,showClose:!0,showUploadedThumbs:!0,autoReplace:!1,mainClass:"",previewClass:"",captionClass:"",mainTemplate:null,initialCaption:"",initialPreview:[],initialPreviewDelimiter:"*$$*",initialPreviewConfig:[],initialPreviewThumbTags:[],previewThumbTags:{},initialPreviewShowDelete:!0,deleteUrl:"",deleteExtraData:{},overwriteInitial:!0,layoutTemplates:g,previewTemplates:nt,allowedPreviewTypes:b,allowedPreviewMimeTypes:null,allowedFileTypes:null,allowedFileExtensions:null,defaultPreviewContent:null,customLayoutTags:{},customPreviewTags:{},previewSettings:k,fileTypeSettings:l,previewFileIcon:'<i class="glyphicon glyphicon-file"><\/i>',previewFileIconClass:"file-icon-4x",previewFileIconSettings:{},previewFileExtSettings:{},buttonLabelClass:"hidden-xs",browseIcon:'<i class="glyphicon glyphicon-folder-open"><\/i>',browseClass:"btn btn-primary",removeIcon:'<i class="glyphicon glyphicon-trash"><\/i>',removeClass:"btn btn-default",cancelIcon:'<i class="glyphicon glyphicon-ban-circle"><\/i>',cancelClass:"btn btn-default",uploadIcon:'<i class="glyphicon glyphicon-upload"><\/i>',uploadClass:"btn btn-default",uploadUrl:null,uploadAsync:!0,uploadExtraData:{},minImageWidth:null,minImageHeight:null,maxImageWidth:null,maxImageHeight:null,resizeImage:!1,resizePreference:"width",resizeQuality:.92,resizeDefaultImageType:"image/jpeg",maxFileSize:0,minFileCount:0,maxFileCount:0,validateInitialCount:!1,msgValidationErrorClass:"text-danger",msgValidationErrorIcon:'<i class="glyphicon glyphicon-exclamation-sign"><\/i> ',msgErrorClass:"file-error-message",progressThumbClass:"progress-bar progress-bar-success progress-bar-striped active",progressClass:"progress-bar progress-bar-success progress-bar-striped active",progressCompleteClass:"progress-bar progress-bar-success",previewFileType:"image",zoomIndicator:'<i class="glyphicon glyphicon-zoom-in"><\/i>',elCaptionContainer:null,elCaptionText:null,elPreviewContainer:null,elPreviewImage:null,elPreviewStatus:null,elErrorContainer:null,errorCloseButton:'<span class="close kv-error-close">&times;<\/span>',slugCallback:null,dropZoneEnabled:!0,dropZoneTitleClass:"file-drop-zone-title",fileActionSettings:{},otherActionButtons:"",textEncoding:"UTF-8",ajaxSettings:{},ajaxDeleteSettings:{},showAjaxErrorDetails:!0};n.fn.fileinputLocales.en={fileSingle:"file",filePlural:"files",browseLabel:"Browse &hellip;",removeLabel:"Remove",removeTitle:"Clear selected files",cancelLabel:"Cancel",cancelTitle:"Abort ongoing upload",uploadLabel:"Upload",uploadTitle:"Upload selected files",msgZoomTitle:"View details",msgZoomModalHeading:"Detailed Preview",msgSizeTooLarge:'File "{name}" (<b>{size} KB<\/b>) exceeds maximum allowed upload size of <b>{maxSize} KB<\/b>.',msgFilesTooLess:"You must select at least <b>{n}<\/b> {files} to upload.",msgFilesTooMany:"Number of files selected for upload <b>({n})<\/b> exceeds maximum allowed limit of <b>{m}<\/b>.",msgFileNotFound:'File "{name}" not found!',msgFileSecured:'Security restrictions prevent reading the file "{name}".',msgFileNotReadable:'File "{name}" is not readable.',msgFilePreviewAborted:'File preview aborted for "{name}".',msgFilePreviewError:'An error occurred while reading the file "{name}".',msgInvalidFileType:'Invalid type for file "{name}". Only "{types}" files are supported.',msgInvalidFileExtension:'Invalid extension for file "{name}". Only "{extensions}" files are supported.',msgUploadAborted:"The file upload was aborted",msgValidationError:"File Upload Error",msgLoading:"Loading file {index} of {files} &hellip;",msgProgress:"Loading file {index} of {files} - {name} - {percent}% completed.",msgSelected:"{n} {files} selected",msgFoldersNotAllowed:"Drag & drop files only! {n} folder(s) dropped were skipped.",msgImageWidthSmall:'Width of image file "{name}" must be at least {size} px.',msgImageHeightSmall:'Height of image file "{name}" must be at least {size} px.',msgImageWidthLarge:'Width of image file "{name}" cannot exceed {size} px.',msgImageHeightLarge:'Height of image file "{name}" cannot exceed {size} px.',msgImageResizeError:"Could not get the image dimensions to resize.",msgImageResizeException:"Error while resizing the image.<pre>{errors}<\/pre>",dropZoneTitle:"Drag & drop files here &hellip;"};n.extend(n.fn.fileinput.defaults,n.fn.fileinputLocales.en);n.fn.fileinput.Constructor=p;n(document).ready(function(){var t=n("input.file[type=file]");t.length&&t.fileinput()})});